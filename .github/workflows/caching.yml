name: Caching Challenge
on: [push, workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    # 1. The Cache Step (sets up the key)
    - name: Cache Dependencies
      id: cache-step
      uses: actions/cache@v4
      with:
        path: my-cache-file.txt
        key: cache-cd3ca71

    # 2. Generate a dummy file if cache misses (so there is something to save)
    - name: Generate file
      if: steps.cache-step.outputs.cache-hit != 'true'
      run: echo "This data will be cached" > my-cache-file.txt

    # 3. The Required Step (Must be named exactly this)
    - name: prime-cache-cd3ca71
      run: echo "Cache hit status: ${{ steps.cache-step.outputs.cache-hit }}"
